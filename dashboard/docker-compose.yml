version: '2.0'
services:
  ray-head:
    image: thumperai/rayakash:ray-head-gpu-py310
    expose:
      - port: 8265
        as: 8265
        to:
          - service: ray-worker, ray-worker1, ray-worker2, ray-worker3, ray-worker4, ray-worker5
          - global: true
      - port: 6380
        as: 6380
        to:
          - service: ray-worker, ray-worker1, ray-worker2, ray-worker3, ray-worker4, ray-worker5
          - global: true
      - port: 8078
        as: 8078
        to:
          - service: ray-worker, ray-worker1, ray-worker2, ray-worker3, ray-worker4, ray-worker5
      - port: 8079
        as: 8079
        to:
          - service: ray-worker, ray-worker1, ray-worker2, ray-worker3, ray-worker4, ray-worker5
      - port: 10002
        as: 10002
        to:
          - service: ray-worker, ray-worker1, ray-worker2, ray-worker3, ray-worker4, ray-worker5
      - port: 10003
        as: 10003
        to:
          - service: ray-worker, ray-worker1, ray-worker2, ray-worker3, ray-worker4, ray-worker5
      - port: 10004
        as: 10004
        to:
          - service: ray-worker, ray-worker1, ray-worker2, ray-worker3, ray-worker4, ray-worker5
      - port: 10005
        as: 10005
        to:
          - service: ray-worker, ray-worker1, ray-worker2, ray-worker3, ray-worker4, ray-worker5